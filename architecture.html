<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contains Studio App - ç³»çµ±æ¶æ§‹åœ–</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 30px;
        }
        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d2ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 30px;
            font-size: 0.95rem;
        }
        .diagram-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .diagram-section h2 {
            color: #7b2ff7;
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-left: 4px solid #7b2ff7;
            padding-left: 12px;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        .mermaid svg {
            max-width: 100%;
        }
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        .tech-card {
            background: rgba(123, 47, 247, 0.1);
            border: 1px solid rgba(123, 47, 247, 0.3);
            border-radius: 12px;
            padding: 16px;
        }
        .tech-card h3 {
            color: #00d2ff;
            font-size: 0.95rem;
            margin-bottom: 8px;
        }
        .tech-card ul {
            list-style: none;
            font-size: 0.85rem;
            color: #ccc;
        }
        .tech-card ul li::before {
            content: "â–¸ ";
            color: #7b2ff7;
        }
    </style>
</head>
<body>

<h1>Contains Studio App - ç³»çµ±æ¶æ§‹åœ–</h1>
<p class="subtitle">AI Agents Studio ï½œ æ•´åˆ Google Gemini AI çš„å¤šéƒ¨é–€æ™ºæ…§ä»£ç†å¹³å°</p>

<!-- 1. æ•´é«”ç³»çµ±æ¶æ§‹ -->
<div class="diagram-section">
    <h2>1. æ•´é«”ç³»çµ±æ¶æ§‹ (System Architecture)</h2>
    <div class="mermaid">
graph TB
    subgraph CLIENT["ğŸ–¥ï¸ å‰ç«¯ Frontend (React 18 SPA)"]
        UI["ä½¿ç”¨è€…ä»‹é¢<br/>Tailwind CSS + Dark Theme"]
        DEPT["éƒ¨é–€é¸æ“‡å™¨<br/>8 å€‹éƒ¨é–€"]
        AGENT["ä»£ç†é¸æ“‡å™¨<br/>37 å€‹ AI Agents"]
        CHAT["èŠå¤©ä»‹é¢<br/>å³æ™‚å°è©±"]
        STATE["ç‹€æ…‹ç®¡ç†<br/>useState + localStorage"]
        STRIPE_UI["Stripe ä»˜è²»ç‰†<br/>3 æ¬¡å…è²»åˆ†æ"]
    end

    subgraph VERCEL["â˜ï¸ Vercel é›²ç«¯å¹³å°"]
        CDN["Vercel CDN<br/>éœæ…‹è³‡æºè¨—ç®¡"]
        SF["Serverless Function<br/>api/chat.js"]
        SECURITY["å®‰å…¨å±¤<br/>Rate Limit Â· CORS Â· è¼¸å…¥é©—è­‰"]
    end

    subgraph EXTERNAL["ğŸŒ å¤–éƒ¨æœå‹™"]
        GEMINI["Google Gemini AI<br/>ç”Ÿæˆå¼ AI API"]
        STRIPE["Stripe<br/>é‡‘æµä»˜æ¬¾"]
        GITHUB["GitHub<br/>ç¨‹å¼ç¢¼è¨—ç®¡"]
    end

    USER((ğŸ‘¤ ä½¿ç”¨è€…)) --> UI
    UI --> DEPT --> AGENT --> CHAT
    CHAT --> STATE
    STRIPE_UI --> STRIPE

    CHAT -->|"POST /api/chat"| SF
    SF --> SECURITY
    SECURITY -->|"API Call"| GEMINI
    GEMINI -->|"AI å›æ‡‰"| SF
    SF -->|"JSON Response"| CHAT

    CDN -->|"éœæ…‹è³‡æº"| CLIENT
    GITHUB -->|"CI/CD è‡ªå‹•éƒ¨ç½²"| VERCEL

    style CLIENT fill:#1a1a2e,stroke:#7b2ff7,color:#fff
    style VERCEL fill:#1a1a2e,stroke:#00d2ff,color:#fff
    style EXTERNAL fill:#1a1a2e,stroke:#ff6b6b,color:#fff
    style USER fill:#7b2ff7,stroke:#7b2ff7,color:#fff
    </div>
</div>

<!-- 2. å‰ç«¯å…ƒä»¶æ¶æ§‹ -->
<div class="diagram-section">
    <h2>2. å‰ç«¯å…ƒä»¶æ¶æ§‹ (Frontend Component Architecture)</h2>
    <div class="mermaid">
graph TD
    subgraph ENTRY["å…¥å£"]
        HTML["index.html<br/>zh-TW"]
        MAIN["main.jsx<br/>React é€²å…¥é»"]
        CSS["index.css<br/>å…¨åŸŸæ¨£å¼ + Tailwind"]
    end

    subgraph APP["App.jsx (ä¸»å…ƒä»¶ - 497 è¡Œ)"]
        direction TB
        HOOKS["Custom Hooks"]
        USEUSER["useUser Hook<br/>- ä½¿ç”¨è€…ç‹€æ…‹<br/>- åˆ†ææ¬¡æ•¸è¿½è¹¤<br/>- ä»˜è²»ç‹€æ…‹<br/>- localStorage æŒä¹…åŒ–"]

        COMPONENTS["å­å…ƒä»¶"]
        PAYMENT["StripePaymentLink<br/>ä»˜è²»ç‰†å…ƒä»¶"]
        DEPTVIEW["éƒ¨é–€ç€è¦½<br/>8 éƒ¨é–€ Â· æ¼¸å±¤è‰²å½©"]
        AGENTVIEW["ä»£ç†ç€è¦½<br/>37 å€‹å°ˆæ¥­ä»£ç†"]
        CHATVIEW["èŠå¤©è¦–çª—<br/>è¨Šæ¯æ³¡æ³¡ Â· å‹•ç•«è¼‰å…¥"]
    end

    subgraph STATES["æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹"]
        S1["selectedDepartment"]
        S2["selectedAgent"]
        S3["messages[]"]
        S4["loading"]
        S5["messageLength"]
    end

    HTML --> MAIN --> APP
    MAIN --> CSS
    APP --> HOOKS
    HOOKS --> USEUSER
    APP --> COMPONENTS
    COMPONENTS --> PAYMENT
    COMPONENTS --> DEPTVIEW
    COMPONENTS --> AGENTVIEW
    COMPONENTS --> CHATVIEW
    APP --> STATES

    style ENTRY fill:#1a1a2e,stroke:#00d2ff,color:#fff
    style APP fill:#1a1a2e,stroke:#7b2ff7,color:#fff
    style STATES fill:#1a1a2e,stroke:#ff6b6b,color:#fff
    </div>
</div>

<!-- 3. API å¾Œç«¯æ¶æ§‹ -->
<div class="diagram-section">
    <h2>3. API å¾Œç«¯æ¶æ§‹ (Backend API Architecture)</h2>
    <div class="mermaid">
graph LR
    subgraph REQUEST["ğŸ“¨ è«‹æ±‚"]
        REQ["POST /api/chat<br/>{message, agentName,<br/>agentTitle, agentDesc}"]
    end

    subgraph MIDDLEWARE["ğŸ›¡ï¸ å®‰å…¨ä¸­ä»‹å±¤"]
        RATE["Rate Limiting<br/>20 req/min per IP"]
        CORS["CORS ç™½åå–®<br/>4 å€‹ä¿¡ä»»ç¶²åŸŸ"]
        VALID["è¼¸å…¥é©—è­‰<br/>è¨Šæ¯ â‰¤ 5000 å­—å…ƒ<br/>Agentå â‰¤ 200 å­—å…ƒ"]
        HEADERS["å®‰å…¨æ¨™é ­<br/>X-Content-Type-Options<br/>X-Frame-Options: DENY"]
    end

    subgraph AGENT_ROUTER["ğŸ¤– Agent è·¯ç”±å™¨"]
        TELECOM["é›»ä¿¡ä»£ç† x5<br/>5G Â· å…‰çº– Â· FAB"]
        PM["å°ˆæ¡ˆç®¡ç†ä»£ç†"]
        DESIGN["è¨­è¨ˆä»£ç†"]
        MARKET["è¡ŒéŠ·ä»£ç†"]
        PRODUCT["ç”¢å“ä»£ç†"]
        TEST["æ¸¬è©¦ä»£ç†"]
        HEALTH["å¥åº·æ•™ç·´"]
        ZIWEI["ç´«å¾®é¡§å•"]
    end

    subgraph GEMINI_API["ğŸ§  Google Gemini"]
        GEN["generative-ai SDK<br/>Temperature: 0.7<br/>Max Tokens: 2048"]
    end

    REQ --> RATE --> CORS --> VALID --> HEADERS
    HEADERS --> AGENT_ROUTER
    AGENT_ROUTER -->|"System Prompt"| GEN
    GEN -->|"AI Response"| RESPONSE["ğŸ“¤ JSON å›æ‡‰"]

    style REQUEST fill:#1a1a2e,stroke:#00d2ff,color:#fff
    style MIDDLEWARE fill:#1a1a2e,stroke:#ff6b6b,color:#fff
    style AGENT_ROUTER fill:#1a1a2e,stroke:#7b2ff7,color:#fff
    style GEMINI_API fill:#1a1a2e,stroke:#ffd700,color:#fff
    </div>
</div>

<!-- 4. éƒ¨é–€èˆ‡ä»£ç†çµæ§‹ -->
<div class="diagram-section">
    <h2>4. éƒ¨é–€èˆ‡ AI ä»£ç†çµæ§‹ (Departments & Agents)</h2>
    <div class="mermaid">
graph TD
    STUDIO["ğŸ¢ Contains Studio<br/>AI Agents Platform"]

    ENG["âš¡ å·¥ç¨‹éƒ¨<br/>Engineering"]
    DES["ğŸ¨ è¨­è¨ˆéƒ¨<br/>Design"]
    MKT["ğŸ“Š è¡ŒéŠ·éƒ¨<br/>Marketing"]
    PRD["ğŸ“¦ ç”¢å“éƒ¨<br/>Product"]
    PMO["ğŸ“‹ å°ˆæ¡ˆç®¡ç†éƒ¨<br/>Project Management"]
    OPS["âš™ï¸ ç‡Ÿé‹éƒ¨<br/>Studio Operations"]
    QA["ğŸ§ª æ¸¬è©¦éƒ¨<br/>Testing"]
    BONUS["ğŸ’ª å¥åº·ç¦åˆ©<br/>Bonus"]

    STUDIO --> ENG
    STUDIO --> DES
    STUDIO --> MKT
    STUDIO --> PRD
    STUDIO --> PMO
    STUDIO --> OPS
    STUDIO --> QA
    STUDIO --> BONUS

    ENG --> E1["5G ç¶²è·¯è¦åŠƒå¸«"]
    ENG --> E2["å…‰çº–ç¶²è·¯å°ˆå®¶"]
    ENG --> E3["FAB ç¶²è·¯è¦åŠƒå¸«"]
    ENG --> E4["è¨­å‚™ IoT å·¥ç¨‹å¸«"]
    ENG --> E5["é›»ä¿¡åŸºç¤è¨­æ–½"]

    DES --> D1["è¦–è¦ºè¨­è¨ˆå¸«"]
    DES --> D2["UX è¨­è¨ˆå¸«"]

    MKT --> M1["è¡ŒéŠ·ç­–ç•¥å¸«"]
    MKT --> M2["æ•¸æ“šåˆ†æå¸«"]

    BONUS --> B1["å¥åº·æ•™ç·´<br/>ğŸ’° 3æ¬¡å…è²»"]
    BONUS --> B2["ç´«å¾®é¡§å•"]

    style STUDIO fill:#7b2ff7,stroke:#7b2ff7,color:#fff
    style ENG fill:#1a1a2e,stroke:#ff6b6b,color:#fff
    style DES fill:#1a1a2e,stroke:#ff9a76,color:#fff
    style MKT fill:#1a1a2e,stroke:#ffd700,color:#fff
    style PRD fill:#1a1a2e,stroke:#00d2ff,color:#fff
    style PMO fill:#1a1a2e,stroke:#7bed9f,color:#fff
    style OPS fill:#1a1a2e,stroke:#70a1ff,color:#fff
    style QA fill:#1a1a2e,stroke:#ff6348,color:#fff
    style BONUS fill:#1a1a2e,stroke:#ff4757,color:#fff
    </div>
</div>

<!-- 5. éƒ¨ç½²æµç¨‹ -->
<div class="diagram-section">
    <h2>5. CI/CD éƒ¨ç½²æµç¨‹ (Deployment Pipeline)</h2>
    <div class="mermaid">
graph LR
    DEV["ğŸ‘¨â€ğŸ’» é–‹ç™¼è€…<br/>æœ¬åœ°é–‹ç™¼"]
    GIT["GitHub Repo<br/>JeffWang110/<br/>contains-studio-app"]
    VERCEL_BUILD["Vercel Build<br/>npm run build<br/>Vite æ‰“åŒ…"]
    DEPLOY["Production<br/>contains-studio-app<br/>.vercel.app"]

    DEV -->|"git push"| GIT
    GIT -->|"Auto Deploy<br/>Webhook"| VERCEL_BUILD
    VERCEL_BUILD -->|"éœæ…‹ â†’ CDN<br/>API â†’ Serverless"| DEPLOY

    DEV -->|"npx vercel<br/>--prod --yes"| DEPLOY

    ENV["ğŸ” ç’°å¢ƒè®Šæ•¸<br/>GEMINI_API_KEY"]
    ENV -.->|"Vercel Dashboard"| VERCEL_BUILD

    style DEV fill:#1a1a2e,stroke:#7b2ff7,color:#fff
    style GIT fill:#1a1a2e,stroke:#00d2ff,color:#fff
    style VERCEL_BUILD fill:#1a1a2e,stroke:#ffd700,color:#fff
    style DEPLOY fill:#1a1a2e,stroke:#7bed9f,color:#fff
    style ENV fill:#1a1a2e,stroke:#ff6b6b,color:#fff
    </div>
</div>

<!-- 6. å°ˆæ¡ˆæª”æ¡ˆçµæ§‹ -->
<div class="diagram-section">
    <h2>6. å°ˆæ¡ˆæª”æ¡ˆçµæ§‹ (Project File Structure)</h2>
    <div class="mermaid">
graph TD
    ROOT["ğŸ“ contains-studio-app/"]

    CLAUDE_DIR["ğŸ“ .claude/<br/>Claude Code è¨­å®š"]
    AGENTS_DIR["ğŸ“ .agents/<br/>Agent æŒ‡ä»¤æ¨¡æ¿"]
    GITHUB_DIR["ğŸ“ .github/<br/>Copilot è¨­å®š"]
    API_DIR["ğŸ“ api/<br/>å¾Œç«¯ API"]
    PUBLIC_DIR["ğŸ“ public/<br/>éœæ…‹è³‡æº"]
    SRC_DIR["ğŸ“ src/<br/>å‰ç«¯åŸå§‹ç¢¼"]
    CONFIG["âš™ï¸ è¨­å®šæª”"]

    ROOT --> CLAUDE_DIR
    ROOT --> AGENTS_DIR
    ROOT --> GITHUB_DIR
    ROOT --> API_DIR
    ROOT --> PUBLIC_DIR
    ROOT --> SRC_DIR
    ROOT --> CONFIG

    CLAUDE_DIR --> SK["skills/<br/>apiprotect Â· github-mcp<br/>line-mcp Â· party Â· vercel-mcp"]

    API_DIR --> CHAT_JS["chat.js<br/>Vercel Serverless Function"]

    SRC_DIR --> APP_JSX["App.jsx (497è¡Œ)<br/>ä¸»è¦ React å…ƒä»¶"]
    SRC_DIR --> MAIN_JSX["main.jsx<br/>React é€²å…¥é»"]
    SRC_DIR --> INDEX_CSS["index.css<br/>Tailwind + å…¨åŸŸæ¨£å¼"]

    CONFIG --> PKG["package.json"]
    CONFIG --> VITE["vite.config.js"]
    CONFIG --> TW["tailwind.config.js"]
    CONFIG --> PC["postcss.config.js"]
    CONFIG --> VC["vercel.json"]
    CONFIG --> ENV[".env.example"]

    style ROOT fill:#7b2ff7,stroke:#7b2ff7,color:#fff
    style SRC_DIR fill:#1a1a2e,stroke:#00d2ff,color:#fff
    style API_DIR fill:#1a1a2e,stroke:#ff6b6b,color:#fff
    style CLAUDE_DIR fill:#1a1a2e,stroke:#ffd700,color:#fff
    style CONFIG fill:#1a1a2e,stroke:#7bed9f,color:#fff
    </div>
</div>

<!-- æŠ€è¡“æ£§ç¸½è¦½ -->
<div class="diagram-section">
    <h2>7. æŠ€è¡“æ£§ç¸½è¦½ (Tech Stack Overview)</h2>
    <div class="tech-stack">
        <div class="tech-card">
            <h3>å‰ç«¯ Frontend</h3>
            <ul>
                <li>React 18.2.0</li>
                <li>Vite 5.1.4</li>
                <li>Tailwind CSS 3.4.1</li>
                <li>PostCSS + Autoprefixer</li>
            </ul>
        </div>
        <div class="tech-card">
            <h3>å¾Œç«¯ Backend</h3>
            <ul>
                <li>Vercel Serverless Functions</li>
                <li>Node.js (ES Modules)</li>
                <li>api/chat.js ç«¯é»</li>
            </ul>
        </div>
        <div class="tech-card">
            <h3>AI æ•´åˆ</h3>
            <ul>
                <li>Google Gemini AI</li>
                <li>@google/generative-ai 0.24.1</li>
                <li>17+ Agent Personas</li>
                <li>Temperature: 0.7</li>
            </ul>
        </div>
        <div class="tech-card">
            <h3>éƒ¨ç½² Deployment</h3>
            <ul>
                <li>Vercel (Hosting + CDN)</li>
                <li>GitHub CI/CD</li>
                <li>è‡ªå‹•éƒ¨ç½² (Push to Main)</li>
            </ul>
        </div>
        <div class="tech-card">
            <h3>å®‰å…¨ Security</h3>
            <ul>
                <li>Rate Limiting (20/min)</li>
                <li>CORS ç™½åå–®</li>
                <li>è¼¸å…¥é©—è­‰ (5000 å­—å…ƒ)</li>
                <li>å®‰å…¨æ¨™é ­ (DENY frame)</li>
            </ul>
        </div>
        <div class="tech-card">
            <h3>é‡‘æµ Payment</h3>
            <ul>
                <li>Stripe ä»˜æ¬¾æ•´åˆ</li>
                <li>3 æ¬¡å…è²»åˆ†æ</li>
                <li>localStorage ç‹€æ…‹è¿½è¹¤</li>
            </ul>
        </div>
        <div class="tech-card">
            <h3>é–‹ç™¼å·¥å…· DevTools</h3>
            <ul>
                <li>Claude Code (5 MCP Skills)</li>
                <li>GitHub Copilot</li>
                <li>ESBuild + Rollup</li>
            </ul>
        </div>
        <div class="tech-card">
            <h3>ç›¸é—œå°ˆæ¡ˆ Ecosystem</h3>
            <ul>
                <li>agents.jeffwang.work</li>
                <li>party.jeffwang.work</li>
                <li>books.jeffwang.work</li>
            </ul>
        </div>
    </div>
</div>

<script>
    mermaid.initialize({
        startOnLoad: true,
        theme: 'dark',
        themeVariables: {
            primaryColor: '#7b2ff7',
            primaryTextColor: '#fff',
            primaryBorderColor: '#7b2ff7',
            lineColor: '#00d2ff',
            secondaryColor: '#1a1a2e',
            tertiaryColor: '#302b63',
            fontFamily: 'Segoe UI, Microsoft JhengHei, sans-serif',
            fontSize: '14px',
            nodeBorder: '#7b2ff7',
            mainBkg: '#1a1a2e',
            clusterBkg: 'rgba(123,47,247,0.08)',
            clusterBorder: '#7b2ff7'
        },
        flowchart: {
            useMaxWidth: true,
            htmlLabels: true,
            curve: 'basis',
            padding: 20
        }
    });
</script>

</body>
</html>
